@{
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>Index</title>
    <meta charset="UTF-8">
    <meta content="text/html;charset=UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Cache-Control" content="no cache" />
    <meta http-equiv="Expires" content="0" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="format-detection" content="telephone=no" />
    <script src="https://cdn.bootcss.com/pace/1.0.2/pace.min.js"></script>
    <link href="https://cdn.bootcss.com/pace/1.0.2/themes/pink/pace-theme-flash.css" rel="stylesheet">

    <link rel="stylesheet" type="text/css" href="/MyFsLayui/plugins/layui/css/layui.css" media="all" />
    <link rel="stylesheet" type="text/css" href="/MyFsLayui/css/fs.css" media="all" />
    <script type="text/javascript" src="/MyFsLayui/plugins/layui/layui.js"></script>
    <script type="text/javascript" src="/MyFsLayui/plugins/jquery/jquery.min.js"></script>
    <script type="text/javascript" src="/MyFsLayui/plugins/frame/js/fsDict.js?v=1.7.0"></script>

    <link href="/MyFsLayui/plugins/contextMenu/jquery.contextMenu.min.css" rel="stylesheet">
    <script src="/MyFsLayui/plugins/contextMenu/jquery.contextMenu.min.js"></script>
    <link rel="stylesheet" href="/MyFsLayui/plugins/ztree/css/zTreeStyle/zTreeStyle.css" type="text/css" />
    <script type="text/javascript" src="/MyFsLayui/plugins/ztree/js/jquery.ztree.all.min.js"></script>

    <script type="text/javascript" src="/MyFsLayui/plugins/frame/js/fs.js?v=1.7.0"></script>
    <script type="text/javascript" src="~/MyFsLayui/plugins/frame/js/frame.js?v=1.7.0"></script>
</head>
<body>
    <div class="layui-fluid">
        <div class="layui-row layui-col-space10">
            <div class="layui-col-md3">
                <fieldset class="layui-elem-field">
                    <legend>部门列表</legend>
                    <div class="layui-field-box">
                        <div class="layui-row layui-col-space10">
                            <div class="layui-col-md12">
                                @*树控件呈现区*@
                                <ul id="treeDemo" class="ztree fsTree" method="get" isroot="1" url="/BuMen/CreateTreeData"
                                    clickcallbackid="fsDatagrid" clickcallbackinputs="menuId:$id" treeidkey="id" treepidkey="pId" treename="name"></ul>

                            </div>
                        </div>
                    </div>
                </fieldset>
                <div class="layui-col-md12">
                    <!--外部按钮通过function=top 打开窗口-->
                    <button class="layui-btn layui-btn-sm" function="top" topurl="/BuMen/AddBM" topwidth="800px" ismaximize="0" topheight="600px" toptitle="添加部门"><i class="layui-icon">&#xe654;</i>新增</button>
                    <button class="layui-btn layui-btn-sm" function="top" topurl="/BuMen/UpdateBM" selecttreeid="menuId" topwidth="800px" topheight="600px" toptitle="修改部门信息" inputs="menuId:#menuId">
                        <i class="layui-icon">&#xe654;</i>修改
                    </button>
                    <button class="layui-btn layui-btn-sm" function="top" topurl="/BuMen/delBM" selecttreeid="menuId" inputs="menuId:#menuId"><i class="layui-icon">&#xe640;</i>禁用</button>
                </div>
            </div>
            <div class="layui-col-md9">
                <fieldset id="menu_func_div" class="layui-elem-field">
                    <legend>人员列表</legend>
                    <div class="layui-field-box">
                        <div class="layui-col-md12 layui-col-space1">
                            <div id="table_buttion_div">
                                <form id="query_form" style="display: none;">
                                    <input type="text" id="menuId" name="menuId" value="" />
                                </form>
                                <button class="layui-btn layui-btn-sm" function="top" topurl="/BuMen/ZhiWei" selecttreeid="menuId" topwidth="800px" topheight="640px" toptitle="新增功能号信息" inputs="menuId:#menuId">
                                    <i class="layui-icon">&#xe615;</i>职位
                                </button>
                                <button class="layui-btn layui-btn-sm" function="top" topurl="/BuMen/Add" selecttreeid="menuId" topwidth="700px" topheight="500px" toptitle="新增功能号信息" inputs="menuId:#menuId">
                                    <i class="layui-icon">&#xe654;</i>新增
                                </button>
                                <button class="layui-btn layui-btn-sm" function="refresh" selecttreeid="menuId">
                                    <i class="layui-icon">&#x1002;</i>刷新
                                </button>
                            </div>
                        </div>
                        <div class="layui-col-md12 layui-col-space1">
                            <table id="fsDatagrid" class="fsDatagrid" lay-filter="fsDatagrid" url="/BuMen/GetEmpData" isload="0" ispage="1"
                                   defaultform="query_form" height="full-130"></table>
                            <div class="fsDatagridCols">
                                <p type="numbers" title="#" />
                                <p checkbox="true" />
                                <p field="ID" title="员工号" width="80" sort="true" />
                                <p field="Name" title="员工名" width="80" />
                                <p field="Phone" title="员工电话" width="100" />
                                <p field="BuMenMingCheng" title="部门" width="100" />
                                <p field="ZhiWeiMing" title="职位" width="100" />
                                <p fixed="right" align="center" toolbar="#barDemo" title="操作" width="150" />
                            </div>
                            <script type="text/html" id="barDemo">
                                <a class="layui-btn layui-btn-primary layui-btn-xs" lay-event="top" topurl="/YuanGong/Edit" topwidth="800px" topheight="640px" toptitle="修改" inputs="ID:">编辑</a>
                                
                                {{#  if(d.YuanGongZhuangTai ==2){ }}
                                <a class="layui-btn layui-btn-danger layui-btn-xs" lay-event="submit" url="/YuanGong/RenZhi"
                                   isconfirm="1" method="get" confirmmsg="当前员工是否确定任职 ？" inputs="ID:">任职</a>
                                {{# } else { }}
                                <a class="layui-btn layui-btn-danger layui-btn-xs" lay-event="submit" url="/YuanGong/Delete"
                                   isconfirm="1" method="get" confirmmsg="当前员工是否确定离职 ？" inputs="ID:">离职</a>
                                {{#  } }}
                            </script>
                        </div>
                    </div>
                </fieldset>
            </div>
        </div>
    </div>
</body>
</html>
