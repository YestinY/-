@{
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>Login</title>
    <script src="~/Login/js/jquery-2.2.4.min.js"></script>
    <link href="~/layui/css/layui.css" rel="stylesheet" />
    <script type="text/javascript">
        $(document).ready(function () {
            $(".form").slideDown(500);

            $("#landing").addClass("border-btn");

            $("#registered").click(function () {
                $("#landing").removeClass("border-btn");
                $("#landing-content").hide(500);
                $(this).addClass("border-btn");
                $("#registered-content").show(500);

            })

            $("#landing").click(function () {
                $("#registered").removeClass("border-btn");
                $(this).addClass("border-btn");

                $("#landing-content").show(500);
                $("#registered-content").hide(500);
            })
        });
    </script>
    <style>
        * {
            margin: 0;
            padding: 0;
            font-family: "微软雅黑";
        }

        body {
            background: #F7F7F7;
        }

        .form {
            position: absolute;
            top: 50%;
            left: 50%;
            margin-left: -185px;
            margin-top: -210px;
            height: 390px;
            width: 400px;
            font-size: 18px;
            -webkit-box-shadow: 0px 0px 10px #A6A6A6;
            background: #fff;
        }

        .border-btn {
            border-bottom: 1px solid #ccc;
        }

        #landing,
        #registered {
            float: left;
            text-align: center;
            width: 195px;
            padding: 15px 0;
            color: #545454;
        }

        #landing-content {
            clear: both;
        }

        .inp {
            height: 30px;
            margin: 0 auto;
            margin-bottom: 20px;
            width: 200px;
        }

            .inp > input {
                text-align: center;
                height: 30px;
                width: 200px;
                margin: 0 auto;
                transition: all 0.3s ease-in-out;
            }

        .login {
            border: 1px solid #A6A6A6;
            color: #a6a6a6;
            height: 30px;
            width: 202px;
            text-align: center;
            font-size: 13.333333px;
            margin-left: 80px;
            line-height: 30px;
            margin-top: 30px;
            transition: all 0.3s ease-in-out;
        }

            .login:hover {
                background: #A6A6A6;
                color: #fff;
            }

        #photo {
            border-radius: 80px;
            border: 1px solid #ccc;
            height: 80px;
            width: 80px;
            margin: 0 auto;
            overflow: hidden;
            clear: both;
            margin-top: 30px;
            margin-bottom: 30px;
        }

            #photo > img:hover {
                -webkit-transform: rotateZ(360deg);
                -moz-transform: rotateZ(360deg);
                -o-transform: rotateZ(360deg);
                -ms-transform: rotateZ(360deg);
                transform: rotateZ(360deg);
            }

            #photo > img {
                height: 80px;
                width: 80px;
                -webkit-background-size: 220px 220px;
                border-radius: 60px;
                -webkit-transition: -webkit-transform 1s linear;
                -moz-transition: -moz-transform 1s linear;
                -o-transition: -o-transform 1s linear;
                -ms-transition: -ms-transform 1s linear;
            }


        #registered-content {
            margin-top: 60px;
            display: none;
        }

        .fix {
            clear: both;
        }

        .form {
            display: none;
        }

        .msgs {
            display: inline-block;
            width: 98px;
            color: #fff;
            font-size: 12px;
            border: 1px solid #0697DA;
            text-align: center;
            height: 30px;
            line-height: 30px;
            background: #0697DA;
            cursor: pointer;
            margin-left: 300px;
            margin-top: -50px;
            float: left
        }

        form .msgs1 {
            background: #E6E6E6;
            color: #818080;
            border: 1px solid #CCCCCC;
        }
    </style>
</head>
<body>
    <form target="_blank">
        <div class="form">
            <div id="landing">登录</div>
            <div id="registered">短信快捷登录</div>
            <div class="fix"></div>
            <div id="landing-content">
                <div id="photo">
                    <img src="~/Login/img/photoyi.jpg" />
                </div>
                <div style="text-align: center; margin-top: -20px; margin-bottom: 10px">
                    <input type="radio" id="Peo1" name="Peo" value="0" checked="checked" /><label style="font-size: 16px; color: #A6A6A6">教员</label>&emsp;
                    <input type="radio" id="Peo2" name="Peo" value="1" /><label style="font-size: 16px; color: #A6A6A6">学生</label>
                </div>
                <div class="inp">
                    <input type="text" placeholder="手机号" id="Phone" name="phone" />
                </div>
                <div class="inp">
                    <input type="password" placeholder="密码" id="MiMa" name="pwd" />
                </div>

                <input value="登录" type="button" style="width: 200px; height: 50px; margin-top: 0px; margin-left: 100px" id="login" class="login" />
            </div>

            <div id="registered-content">
                <div id="photo" style="margin-top:-30px">
                    <img src="~/Login/img/photoyi.jpg" />
                </div>
                <div style="text-align: center; margin-top: -20px; margin-bottom: 10px">
                    <input type="radio" id="Peo3" name="Peo" value="0" checked="checked" /><label style="font-size: 16px; color: #A6A6A6">教员</label>&emsp;
                    <input type="radio" id="Peo4" name="Peo" value="1" /><label style="font-size: 16px; color: #A6A6A6">学生</label>
                </div>
                <div class="inp">
                    <input type="text" placeholder="手机号" style="margin-left: -10px;" id="Phone2" />
                </div>
                <div class="inp">
                    <input type="text" placeholder="验证码" style="margin-left: -10px;" id="User" />
                    <input type="hidden" id="Number" />
                </div>
                <span class="msgs">获取短信验证码</span>
                <input value="登录" type="button" style="width: 200px; height: 50px; margin-top: 0px; margin-left: 100px"; id="Deng"  />
            </div>
        </div>
    </form>
    <script src="~/Scripts/jquery-1.7.1.js"></script>
    <script type="text/javascript">
        $(function () {
            $("#login").click(function () {
                var peo;
                if ($("#Peo1").prop("checked") == true) {
                    peo = 0;
                }
                else {
                    peo = 1;
                }
                $.ajax({
                    type: "post",
                    contentType: "application/json",
                    data: "{phone:'" + $("#Phone").val() + "',pwd:'" + $("#MiMa").val() + "',peo:'" + peo + "'}",
                    dataType: "json",
                    url: "/YiCipaikedekebiaoxinxi/LoginAction",
                    success: function (rus) {
                        if (rus.Count == 1) {
                            alert("登录成功");
                            location.href = "/YiCipaikedekebiaoxinxi/zhuye";
                        } else {
                            alert("登录失败");
                        }
                    }
                })
            })
        })

        $(function () {
            $("#Deng").click(function () {
                var peo;
                if ($("#Peo3").prop("checked") == true) {
                    peo = 0;
                }
                else {
                    peo = 1;
                }
                var User = $("#User").val();
                var Number = $("#Number").val();
                if (User != Number) {
                    alert("验证码错误,请重新输入");
                } else {
                    $.ajax({
                        type: "post",
                        contentType: "application/json",
                        data: "{phone:'" + $("#Phone2").val() + "',pwd:'" + $("#MiMa").val() + "',peo:'" + peo + "'}",
                        dataType: "json",
                        url: "/YiCipaikedekebiaoxinxi/LoginAction",
                        success: function (rus) {
                            if (rus.Count == 1) {
                                alert("登录成功");
                                location.href = "/YiCipaikedekebiaoxinxi/zhuye";
                            } else {
                                alert("登录失败");
                            }
                        }
                    });
                }
            })
        })

        $(function () {
            //获取短信验证码
            var validCode = true;
            $(".msgs").click(function () {
                var time = 60;
                var code = $(this);
                var Number = $("#Phone2").val();
                alert(Number);
                $.ajax({
                    type: "post",
                    contentType: "application/json",
                    data: "{PhoneNumber:" + Number + "}",
                    dataType: "json",
                    url: "/YiCipaikedekebiaoxinxi/SendMessage",
                    success: function (rus) {
                        if (rus.Count == 1) {
                            $("#Number").val(rus.Number);
                            if (validCode) {
                                validCode = false;
                                code.addClass("msgs1");
                                var t = setInterval(function () {
                                    time--;
                                    code.html(time + "秒");
                                    if (time == 0) {
                                        clearInterval(t);
                                        code.html("重新获取");
                                        validCode = true;
                                        code.removeClass("msgs1");
                                    }
                                }, 1000)
                            }
                        } else {
                            alert("登录失败");
                        }
                    }, error: function (ex) {
                        alert(rus.Message);
                    }
                });
            })
        })
    </script>
</body>
</html>
